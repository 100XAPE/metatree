generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Token {
  id            String   @id @default(uuid())
  mint          String   @unique
  name          String
  symbol        String
  imageUrl      String?
  marketCap     Float    @default(0)
  price         Float    @default(0)
  volume5m      Float    @default(0)
  priceChange5m Float    @default(0)
  heatScore     Float    @default(0)
  isVisible     Boolean  @default(false)
  isMainRunner  Boolean  @default(false)
  phase         String   @default("PUMP_FUN")
  narrativeId   String?
  narrative     Narrative? @relation(fields: [narrativeId], references: [id])
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Narrative {
  id             String   @id @default(uuid())
  name           String
  customName     String?
  keywords       String[]
  totalMarketCap Float    @default(0)
  tokenCount     Int      @default(0)
  tokens         Token[]
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model Settings {
  id                 String  @id @default("global")
  minVolume5m        Float   @default(1000)
  mainRunnerMinMc    Float   @default(500000)
  telegramChatId     String?
  telegramBotToken   String?
}
